{"version":3,"sources":["showAlert.js","login.js","stripe.js","updateSetting.js","index.js"],"names":["hideAlert","el","document","querySelector","parentElement","removeChild","showAlert","type","message","marker","body","insertAdjacentHTML","login","email","password","axios","method","url","data","res","status","window","setTimeout","location","assign","response","logout","reload","booking","tourId","stripe","Stripe","session","redirectToCheckout","sessionId","id","updateSettings","toUpperCase","console","log","logoutel","getElementsByClassName","addEventListener","form","e","preventDefault","getElementById","value","updateForm","name","photo","files","FormData","append","passwordFormbtn","textContent","newPassword","newConfirmPassword","bookbnt","dataset"],"mappings":";;AIAA;;AACA;;AACA;AHFA,ADAO,AGAP,IHAaA,SAAS,GAAG,SAAZA,SAAY,GAAI;EACzB,IAAIC,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAT;EACAF,EAAE,CAACG,aAAH,CAAiBC,WAAjB,CAA6BJ,EAA7B;AACH,CAHM,8CICP,AFAA;+CDAA,AEAA;;;AHGO,IAAMK,SAAS,GAAG,SAAZA,SAAY,CAACC,IAAD,EAAOC,OAAP,EAAiB;EACtCR,SAAS;AIDb,AFJO,EFMH,EIFAwC,AFJSZ,EFMLnB,KENY,CEIR,AJEE,GIFCP,QAAQ,CAACuC,sBAAT,CAAgC,IJEFlC,IAA/B,SIFC,EAAmD,CAAnD,CAAf,GJEsDC,OAAxC,WAAV;ACJG,AEAA,EHKHN,AEPgB,EDEPU,AEAAwB,KFAK,CDKN,CAAC1B,IAAT,CAAcC,EGLS,gBHKvB,CAAiC,YAAjC,EAA+CF,MAA/C,iBEPmB,iBAAOoB,MAAP;AEKvB,AJGC,CAJM,CCFW,AEAS,ECGvBW,AFLmB,QEKvB,EAAc,0DHHO,AEAS,iBFAF3B,AEASK,IAAP,CFAT,CEAqBX,CFAPO,GEAL,KFAT;EGInB0B,EHJmB,ACFE,ACEO,MCIpB,CAACE,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;IACvC,AHLiB,AEAS,EDFP,EEOnBhB,aAAA;EACD,CAFD,GHJmB,AEAS,EDFP;AEStB,QHPoB,AEAS,EDFP;UDEF,AEAS,EDD1B;AEUJ,IAAIiB,IAAI,GAAGzC,CHTU,ACCX4B,ACDoB,MDFP,CEWJ,CAAC3B,CFRD4B,MAAM,MEQd,CAAuB,IFXX,UEWZ,CAAX;YHTqB,ACFE,ACEO;ACW9B,IAAIY,IAAJ,EAAU,EHXW,ACFE,ACEO,OFER5B,ACAKA,ACCDA,KFDC,ACAK,ACCD,CFDH,AECI,2CDDqCc,MAArC,EAJT;EEcrBc,IAAI,CAACD,OHTD1B,AECMA,MFDA,AECM,EFDJ,AECK,CCQjB,CAAsB,IHVI,CECI,GCS9B,EAAgC,UAAC4B,CAAD,EAAO;IACrCA,CAAC,CAACC,IFfiB,IDMjB5B,AECMA,GFDH,AECM,EFDJ,CGSP,oBHXwB,GEGOV,IAAI,KAAK,SAAT,GAAqB,WAArB,GAAoCA,IAAI,KAAK,UAAT,GAAuB,iBAAvB,GAA0C,IAAlG,CAFiB;ICW5B,IAAIM,IFZEmB,CEYG,CHTPd,AECMA,ECQIhB,EHTN,AECM,CDRO,CDOX,AECAgB,ICQY,CAAC4B,cAAT,CAAwB,OAAxB,EAAiCC,KAA7C;IACA,IAAIjC,IFjBe,ACKS,CAAD,CAHD,ECed,AHTRD,GGSWX,EHTN,EAALW,IGSmB,CAACiC,AHVhB,cGUO,CAAwB,UAAxB,EAAoCC,KAAnD;IAEA,IAAAnC,IFnBmB,IDSfE,GCJEgB,CEcN,EAAMjB,EHVM,CCJA,CDIRC,ACJSmB,CEcb,EAAanB,QAAb,OFdM,CAA0B;EEejC,CAND,ODZ4B,IFKlB,ACFyBoB,SAAS,EAAGF,OAAO,CAACd,IAAR,CAAac,OAAb,CAAqBG;AEgBrE,YHjB2B,ACCQ,ACAtBhB,CFDa,ACCjB,CDHW,ACFE,CCEO;;ACqB9B,IAAM6B,MHrBe,ACFE,ECUf,ECaQ,EDbL7B,CCaQjB,EDbL,CAACgB,IAAJ,CCagB,ADbPE,CCaQjB,KDbjB,KAAkB,GCaV,CAAuB,KDblC,EAA+B,UCapB,CAAnB;UFvBuB,EDIbgB,EEOE,CFTS,GESTb,oBAAA,EAAU,SAAV,YAAuBC,IAAI,CAAC8B,WAAL,EAAvB;ACcZ,IAAIW,QFzBmB,ACYd,ECaT,EAAgB;EACdA,MF1BqB,IE0BX,AHbR,CGaSN,GHbLvB,GAAG,CAACD,IAAJ,CAASE,IGaf,CAA4B,CHbtB,KAAoB,EGa1B,EAAsC,KHbpC,EAAmC,GGaEwB,CAAD,EAAO;IAC3CA,CAAC,CAACC,AF3BiB,MCEO,EFYxB,IAAAvC,EGaF,kBHbE,EAAU,SAAV,EAAqB,qBAArB;IGcF,AF5BmB,IE4Bb2C,IAAI,AD1BgB,EFaxB5B,CGaWnB,KHbL,CAACoB,EGaY,CAACwB,OHbpB,CAAkB,MGaP,CAAwB,KHbX,CGab,EAAgCC,KAA7C;EF5BmB,CAAH,CE6BhB,IAAMlC,KAAK,GAAGX,AHbV,IAAAF,IGakB,CAAC8C,cAAT,CAAwB,AHblC,OGaU,EAAiCC,KAA/C;IACA,IAAMG,ED5BoB,GC4Bf,GAAGhD,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","file":"bundle.js","sourceRoot":"","sourcesContent":["export const hideAlert = ()=>{\r\n    let el = document.querySelector(\".alert\")\r\n    el.parentElement.removeChild(el)\r\n}\r\nexport const showAlert = (type, message)=>{\r\n    hideAlert()\r\n    let marker = `<div class=\"alert alert--${type}\">${message}</div>`\r\n    document.body.insertAdjacentHTML(\"afterbegin\" ,marker)\r\n}","import { showAlert, hideAlert } from './showAlert';\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Log in successfully');\r\n      window.setTimeout(() => {\r\n        hideAlert();\r\n        location.assign('/');\r\n      }, 3000);\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n};\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: '/logout',\r\n    });\r\n\r\n    location.assign('/');\r\n    location.reload(true);\r\n  } catch (error) {\r\n    showAlert('error', 'something went wrong');\r\n  }\r\n};\r\n","export const booking = async (tourId)=>{\r\n    // book-tour\r\n    \r\n    const stripe = Stripe(process.env.STRIPE_PUBLIC_KEY)\r\n    const session =  await axios(`/api/v1/bookings/cookies-session/${tourId}`) \r\n    await stripe.redirectToCheckout({sessionId : session.data.session.id})\r\n    \r\n}","import { showAlert } from \"./showAlert\"\r\n\r\nexport const updateSettings = async (data,type)=>{\r\n    try {\r\n        \r\n        const res = await axios({\r\n            method:\"PATCH\",\r\n            url : `/api/v1/users/${type === \"profile\" ? \"update-me\"  : type === \"password\" ?  \"update-password\": null}`,\r\n            data\r\n        })\r\n        if(res.data.status===\"success\"){\r\n            showAlert(\"success\",`${type.toUpperCase()} Update Successfully!`)\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n        showAlert(\"error\",\"Something Went Wrong please try again!\")\r\n    }\r\n}","import { login, logout } from './login';\r\nimport { booking } from './stripe';\r\nimport { updateProfile, updateSettings } from './updateSetting';\r\n\r\nlet logoutel = document.getElementsByClassName('nav__el--logout')[0];\r\nif (logoutel) {\r\n  logoutel.addEventListener('click', () => {\r\n    logout();\r\n  });\r\n}\r\n\r\nlet form = document.querySelector('.form--login');\r\n\r\nif (form) {\r\n  form.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    let email = document.getElementById('email').value;\r\n    let password = document.getElementById('password').value;\r\n\r\n    login(email, password);\r\n  });\r\n}\r\n\r\nconst updateForm = document.querySelector('.form-user-data');\r\n\r\nif (updateForm) {\r\n  updateForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const name = document.getElementById('name').value;\r\n    const email = document.getElementById('email').value;\r\n    const photo = document.getElementById('photo').files[0];\r\n\r\n  \r\n    let form = new FormData();\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n    updateSettings(form, 'profile');\r\n  });\r\n}\r\n\r\nconst passwordFormbtn = document.querySelector('.update-pass-btn');\r\n\r\nif (passwordFormbtn) {\r\n  passwordFormbtn.addEventListener('click', async (e) => {\r\n    passwordFormbtn.textContent = 'Updating...';\r\n    const password = document.getElementById('password-current').value;\r\n    const newPassword = document.getElementById('newPassword').value;\r\n    const newConfirmPassword =\r\n      document.getElementById('newConfirmPassword').value;\r\n\r\n    await updateSettings(\r\n      { password, newPassword, newConfirmPassword },\r\n      'password'\r\n    );\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('newPassword').value = '';\r\n    document.getElementById('newConfirmPassword').value = '';\r\n    passwordFormbtn.textContent = 'Save password';\r\n  });\r\n}\r\n\r\nconst bookbnt = document.getElementById('book-tour');\r\nif (bookbnt) {\r\n  const tourId = bookbnt.dataset.tourId;\r\n  bookbnt.addEventListener('click', (e) => {\r\n    booking(tourId);\r\n  });\r\n}\r\n"]}