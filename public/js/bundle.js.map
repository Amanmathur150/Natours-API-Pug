{"version":3,"sources":["showAlert.js","login.js","stripe.js","updateSetting.js","index.js"],"names":["hideAlert","el","document","querySelector","parentElement","removeChild","showAlert","type","message","marker","body","insertAdjacentHTML","login","email","password","axios","method","url","data","res","console","log","status","window","setTimeout","location","assign","response","logout","reload","booking","tourId","stripe","Stripe","session","redirectToCheckout","sessionId","id","updateSettings","toUpperCase","logoutel","getElementsByClassName","addEventListener","form","e","preventDefault","getElementById","value","updateForm","name","photo","files","FormData","append","passwordForm","passwordFormbtn","textContent","newPassword","newConfirmPassword","bookbnt","dataset"],"mappings":";;AIAA;;AACA;;AACA;AHFA,ADAO,AGAP,IHAaA,SAAS,GAAG,SAAZA,SAAY,GAAI;EACzB,IAAIC,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAT;EACAF,EAAE,CAACG,aAAH,CAAiBC,WAAjB,CAA6BJ,EAA7B,cEDJ;AFEC,CAHM,8CICP;+CHAA,AEAA;;;AHGO,IAAMK,SAAS,GAAG,SAAZA,SAAY,CAACC,IAAD,EAAOC,OAAP,EAAiB;AEJnC,EFKH,EELSsB,EFKLrB,KELY,CFKN,uCAA+BF,IAA/B,gBAAwCC,OAAxC,WAAV;AIAJ,EJCIN,AENgB,EEKhBsC,MJCQ,CAAC9B,CIDD,GAAGR,AJCX,CAAcS,OIDK,CAAC8B,UJCpB,CAAiC,WIDtB,CAAgC,AJC3C,EAA+ChC,MAA/C,SIDW,EAAmD,CAAnD,CAAf,IFLuB,iBAAOsB,MAAP;ADEhB,ADKN,AGLM,CHEA,GCFMnB,ACFU,ACEV0B,KFAK,SEAS;ACI3B,EHJkB,AEAS,ECIxBE,AFNoB,QEMvB,EAAY,0DHJS,AEAS,iBFAH3B,AEAUK,IAAP,CFAT,CEAqBX,CFATO,GEAH,KFAT;EGOjB0B,EHPiB,AEAS,EDFP,IESX,CAACE,gBAAT,CAA0B,OAA1B,EAAkC,YAAI;IAElC,AHTa,AEAS,ICStBd,AFXe,aEWf;EACH,CAHD,GHPiB,AEAS,IDFP;AEatB,QHXoB,AEAS,IDD1B;UDCiB,AEAS,EDCpBI,MAHa,GAGJC,MAAM,CAAC,6GAAD,CAHF;AEevB,IAAIU,IAAI,GAAGzC,CHbU,ACFE,ACEO,OCaX,CAACC,aAAT,CAAuB,cAAvB,CAAX;YHbqB,ACFE,ACEO,ODEHY,KAAK,iEAA0DgB,MAA1D,EAJT;AEiBvB,IAAGY,IAAH,EAAQ,EHfa,AEAS,OFEJ5B,AECAA,KFDK,AECA,CFDC,AECA;ECc5B4B,IAAI,CAACD,GFnBc,IDKX1B,AECAA,MFDM,AECA,EFDC,AECA,CCaf,CAAsB,IHfM,CECA,GCc5B,EAA+B,UAAC4B,CAAD,EAAK;IAChCA,CAAC,CAACC,MFhBAX,EDEEjB,AECAA,GFDG,AECA,EFDG,ACNK,CEoBf,yCHhBwB,GE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","file":"bundle.js","sourceRoot":"","sourcesContent":["export const hideAlert = ()=>{\r\n    let el = document.querySelector(\".alert\")\r\n    el.parentElement.removeChild(el)\r\n}\r\nexport const showAlert = (type, message)=>{\r\n    let marker = `<div class=\"alert alert--${type}\">${message}</div>`\r\n    document.body.insertAdjacentHTML(\"afterbegin\" ,marker)\r\n}","import { showAlert , hideAlert } from \"./showAlert\"\r\n\r\nexport const login = async(email,password)=>{\r\n    try {\r\n       const res =  await axios({\r\n            method:\"POST\",\r\n            url : \"http://localhost:9000/api/v1/users/login\",\r\n            data :{\r\n                email,\r\n                password\r\n            }\r\n        })\r\n        console.log(res)\r\n        if(res.data.status===\"success\"){\r\n            showAlert(\"success\",\"Log in successfully\")\r\n            window.setTimeout(()=>{\r\n                hideAlert()\r\n                location.assign(\"/\")\r\n            },3000)\r\n        }\r\n    } catch (error) {\r\n        showAlert(\"error\",error.response.data.message)\r\n        console.log(error.response)\r\n    }\r\n}\r\nexport const logout = async()=>{\r\n    try {\r\n        console.log(\"hahah\")\r\n       const res =  await axios({\r\n            method:\"GET\",\r\n            url : \"http://localhost:9000/logout\",\r\n        })\r\n        console.log(res)\r\n\r\n        location.assign(\"/\")\r\n        location.reload(true)\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n        showAlert(\"error\",\"something went wrong\")\r\n        \r\n    }\r\n}\r\n\r\n\r\n// document.querySelector(\"form\").addEventListener(\"submit\",(e)=>{\r\n//     e.preventDefault()\r\n//     let email = document.getElementById(\"email\").value\r\n//     let password = document.getElementById(\"password\").value\r\n//     console.log(\"This is working ोकरकेर्पक\")\r\n//     console.log(email,password)\r\n//     login(email,password)\r\n// })","export const booking = async (tourId)=>{\r\n    // book-tour\r\n    \r\n    const stripe = Stripe(\"pk_test_51LpUZjSDDIV3n6A0AFqsEcM4KYbiuf0mWuNB0XXqPrfsM2iYzmHJRVnfFyZDeTIZVkZYBTUqwIFzQym8qdajeNp000GBoMqB7M\")\r\n    const session =  await axios(`http://localhost:9000/api/v1/bookings/cookies-session/${tourId}`) \r\n    // console.log(session)\r\n    await stripe.redirectToCheckout({sessionId : session.data.session.id})\r\n    \r\n}","import { showAlert } from \"./showAlert\"\r\n\r\nexport const updateSettings = async (data,type)=>{\r\n    try {\r\n        \r\n        const res = await axios({\r\n            method:\"PATCH\",\r\n            url : `http://localhost:9000/api/v1/users/${type === \"profile\" ? \"update-me\"  : type === \"password\" ?  \"update-password\": null}`,\r\n            data\r\n        })\r\n        console.log(\"this is from update user\",res)\r\n        if(res.data.status===\"success\"){\r\n            showAlert(\"success\",`${type.toUpperCase()} Update Successfully!`)\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n        showAlert(\"error\",\"Something Went Wrong please try again!\")\r\n    }\r\n}","import {login,logout} from \"./login\"\r\nimport { booking } from \"./stripe\"\r\nimport {updateProfile, updateSettings} from \"./updateSetting\"\r\n\r\n\r\nlet logoutel = document.getElementsByClassName(\"nav__el--logout\")[0]\r\nif(logoutel){\r\n\r\n\r\n    logoutel.addEventListener(\"click\",()=>{\r\n      \r\n        logout()\r\n    })\r\n}\r\n\r\nlet form = document.querySelector(\".form--login\")\r\n\r\nif(form){\r\n\r\n    form.addEventListener(\"submit\",(e)=>{\r\n        e.preventDefault()\r\n        let email = document.getElementById(\"email\").value\r\n        let password = document.getElementById(\"password\").value\r\n        console.log(\"This is working ोकरकेर्पक\")\r\n        console.log(email,password)\r\n        login(email,password)\r\n    })\r\n}\r\n\r\nconst updateForm = document.querySelector(\".form-user-data\")\r\nconsole.log(updateForm)\r\n\r\nif(updateForm){\r\n\r\n    updateForm.addEventListener(\"submit\",(e)=>{\r\n        e.preventDefault()\r\n        const name = document.getElementById(\"name\").value\r\n        const email = document.getElementById(\"email\").value\r\n        const photo = document.getElementById(\"photo\").files[0]\r\n        // const photo = document.getElementById(\"photo\").files[0]\r\n        console.log(\"updateforom\",name,email,photo)\r\n        let form = new FormData()\r\n        form.append(\"name\",document.getElementById(\"name\").value)\r\n        form.append(\"email\",document.getElementById(\"email\").value)\r\n        form.append(\"photo\",document.getElementById(\"photo\").files[0])\r\n        updateSettings(form,\"profile\")\r\n        // console.log(\"photo\",photo)\r\n    })\r\n}\r\nconst passwordForm = document.querySelector(\".update--password\")\r\nconst passwordFormbtn = document.querySelector(\".update-pass-btn\")\r\n\r\n\r\nif(passwordFormbtn){\r\n\r\n    passwordFormbtn.addEventListener(\"click\",async(e)=>{\r\n \r\n       \r\n        passwordFormbtn.textContent = \"Updating...\"\r\n        const password = document.getElementById(\"password-current\").value\r\n        const newPassword = document.getElementById(\"newPassword\").value\r\n        const newConfirmPassword = document.getElementById(\"newConfirmPassword\").value\r\n        // const photo = document.getElementById(\"photo\").files[0]\r\n\r\n        await updateSettings({password,newPassword,newConfirmPassword},\"password\")\r\n        document.getElementById(\"password-current\").value = \"\"\r\n        document.getElementById(\"newPassword\").value = \"\"\r\n        document.getElementById(\"newConfirmPassword\").value = \"\"\r\n        passwordFormbtn.textContent = \"Save password\"\r\n        // console.log(\"photo\",photo)\r\n    })\r\n}\r\n\r\nconst bookbnt = document.getElementById(\"book-tour\")\r\nconst tourId = bookbnt.dataset.tourId\r\nif(tourId){\r\n    bookbnt.addEventListener(\"click\",(e)=>{\r\n        booking(tourId)\r\n    })\r\n}"]}